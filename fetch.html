<!DOCTYPE html>
<html>

<head>
    <script src="https://unpkg.com/vue"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
</head>

<body>
    <div id="app">
        <template>
        <div>
          <h1>Lesson List</h1>
          <table>
            <thead>
              <tr>
                <th>Topic</th>
                <th>Location</th>
                <th>Price</th>
              </tr>
            </thead>
            <tbody>
              <tr v-for="lesson in lessons" :key="lesson.location">
                <td>{{ lesson.topic }}</td>
                <td>{{ lesson.location }}</td>
                <td>{{ lesson.price }}</td>
              </tr>
            </tbody>
          </table>
          <h1>User Information</h1>
          <p>Email: {{ user.Email }}</p>
          <p>Password: {{ user.Password }}</p>
        </div>
      </template>

        <!-- <script>
            import fetch from 'cross-fetch';
            import Vue from 'vue';

            let store = new Vue({
                data() {
                    return {
                        lessons: [],
                        user: {},
                    };
                },
                mounted() {
                    fetch('/lessons')
                        .then((response) => response.json())
                        .then((data) => (this.lessons = data));
                    fetch('/user')
                        .then((response) => response.json())
                        .then((data) => (this.user = data[0]));
                },
            });
            store.$mount('#app')
        </script> -->

        <script>
            import axios from 'axios';

            export default {
                data() {
                    return {
                        lessons: [],
                        user: {}
                    }
                },
                mounted() {
                    // Fetch the lessons data
                    axios.get('/lessons')
                        .then(response => {
                            this.lessons = response.data;
                        })
                        .catch(error => {
                            console.log(error);
                        });

                    // Fetch the user data
                    axios.get('/user')
                        .then(response => {
                            this.user = response.data[0];
                        })
                        .catch(error => {
                            console.log(error);
                        });
                }
            }
        </script>
    </div>

    <!-- let store = new Vue({
                el: '#app',
                data() {
                    return {
                        lessons: [],
                        user: {},
                    };
                },
                // created: function() {
                //     console.log('requesting data from server ...')
                //     fetch('http://localhost:3000/lessons').then(
                //         function(response) {
                //             response.json().then(
                //                 function(json) {
                //                     store.lessons = json;
                //                     console.log(json);
                //                 }
                //             );
                //         }
                //     )
                // },
                // created: function() {
                //     console.log('requesting data from server ...')
                //     fetch('http://localhost:3000/user').then(
                //         function(response) {
                //             response.json().then(
                //                 function(json) {
                //                     store.user = json;
                //                     console.log(json);
                //                 }
                //             );
                //         }
                //     )
                // }, -->

    </div>
</body>

</html>